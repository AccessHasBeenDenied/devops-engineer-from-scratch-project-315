container_data_dir: /srv/data/postgres
container_log_dir: /srv/logs/postgres

container_name: postgres-16
container_image: postgres:16
container_restart_policy: unless-stopped
container_env:
  POSTGRES_DB: "{{ postgres_db }}"
  POSTGRES_USER: "{{ postgres_user }}"
  POSTGRES_PASSWORD: "{{ postgres_password }}"
container_ports: 
  - "5432:5432"
container_volumes:
  - "{{ container_data_dir }}:/var/lib/postgresql/data"
container_healthcheck:
  test: ["CMD-SHELL", "pg_isready -U ${POSTGRES_USER} -d ${POSTGRES_DB}"]
  interval: 10s
  timeout: 5s
  retries: 5
  start_period: 10s
container_healthy_wait_timeout: 60